{% extends "base.html" %}

{% block title %}{{ player_name }}'s {{ streak_length }} {{ streak_type }}{{ 'es' if streak_type == 'loss' and streak_length != 1 else ('s' if streak_length != 1 else '') }} Streak{% if year and year != 'All years' %} ({{ year }}){% endif %}{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ player_name }}'s {{ streak_length }} {{ streak_type }}{{ 'es' if streak_type == 'loss' and streak_length != 1 else ('s' if streak_length != 1 else '') }} Streak{% if year and year != 'All years' %} ({{ year }}){% endif %}</h1>
    
    <div class="streak-info">
        <p><strong>Player:</strong> {{ player_name }}</p>
        <p><strong>Streak:</strong> {{ streak_length }} {{ streak_type }}{{ 'es' if streak_type == 'loss' and streak_length != 1 else ('s' if streak_length != 1 else '') }}</p>
        <p><strong>Games:</strong> {{ streak_games|length }}</p>
    </div>
    
    {% if streak_games %}
    <div class="games-list">
        <h2>Games in this streak:</h2>
        <div>
            <table>
                <thead>
                    <tr>
                        <th scope="col">Date/Time</th>
                        <th scope="col">Winners</th>
                        <th scope="col">Score</th>
                        <th scope="col">Losers</th>
                        <th scope="col">Score</th>
                    </tr>
                </thead>
                <tbody>
                {% for game in streak_games %}
                    <tr>
                        <td>{{ game[1].split(' ')[0] }}<br>
                            {{ game[1].split(' ')[1] }} {{ game[1].split(' ')[2] }}</td>
                        <td><a href="{{ url_for('player_stats', year='All years', name=game[2] ) }}">{{ game[2] }}</a><br><a href="{{ url_for('player_stats', year='All years', name=game[3] ) }}">{{ game[3] }}</a></td>
                        <td class="score winner-score">{{ game[4] }}</td>
                        <td><a href="{{ url_for('player_stats', year='All years', name=game[5] ) }}">{{ game[5] }}</a><br><a href="{{ url_for('player_stats', year='All years', name=game[6] ) }}">{{ game[6] }}</a></td>
                        <td class="score loser-score">{{ game[7] }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% else %}
    <div class="no-games">
        <p>No games found for this streak.</p>
    </div>
    {% endif %}
    
    <div class="back-link">
        <a href="{{ url_for('dashboard') }}">‚Üê Back to Dashboard</a>
    </div>
</div>

<style>
.streak-info {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    margin: 20px 0;
}

.streak-info p {
    margin: 10px 0;
    font-size: 16px;
}

.back-link {
    margin: 20px 0;
}

.back-link a {
    color: var(--link-color);
    text-decoration: none;
    font-size: 16px;
}

.back-link a:hover {
    text-decoration: underline;
}

.no-games {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
}
</style>
{% endblock %}
